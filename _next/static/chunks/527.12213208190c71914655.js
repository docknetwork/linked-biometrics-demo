"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[527],{89527:function(n,e,t){t.r(e),t.d(e,{default:function(){return V}});var r=t(809),i=t.n(r),a=t(85893),s=t(30266),o=t(52209),u=t(67294),c=t(29163),p=t(93354),d=t(37923),f=t(34613);function l(n){return x.apply(this,arguments)}function x(){return(x=(0,s.Z)(i().mark((function n(e){var r,a,s,o,u,c,l;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([t.e(442),t.e(251),t.e(654)]).then(t.bind(t,53442));case 2:return r=n.sent,a=r.proveCompositeClaims,n.next=6,Promise.all([g({issuer:d.TZ.did,delegate:d.HO.did,issuerSk:d.TZ.privateKeyBase58,issuerPk:d.TZ.publicKeyBase58}),g({issuer:d.HO.did,delegate:d.Vc.did,issuerSk:d.HO.privateKeyBase58,issuerPk:d.HO.publicKeyBase58}),h({issuer:d.Vc.did,imageUri:e,issuerSk:d.Vc.privateKeyBase58,issuerPk:d.Vc.publicKeyBase58})]);case 6:return s=n.sent,n.next=9,(0,p.sJ)(s);case 9:return o=n.sent,n.next=12,(0,p.jn)(o);case 12:return u=n.sent,c=[{Iri:e},{Iri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},{Iri:"https://example.com/OfAge"}],n.next=16,a(u,[c],f.Z);case 16:return l=n.sent,o["https://www.dock.io/rdf2020#logicV1"]=l,n.abrupt("return",o);case 19:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n){return v.apply(this,arguments)}function v(){return(v=(0,s.Z)(i().mark((function n(e){var t,r,a,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.issuer,r=e.imageUri,a=e.issuerSk,s=e.issuerPk,[t,r,a,s].forEach(k),n.next=4,(0,p.Ft)(t,{"@id":r,"@type":"https://example.com/OfAge"},a,s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function g(n){return w.apply(this,arguments)}function w(){return(w=(0,s.Z)(i().mark((function n(e){var t,r,a,s;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.issuer,r=e.delegate,a=e.issuerSk,s=e.issuerPk,[t,r,a,s].forEach(k),n.next=4,(0,p.Ft)(t,{"@id":r,"@type":"https://example.com/AgeDelegate"},a,s);case 4:return n.abrupt("return",n.sent);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(n){if(void 0===n)throw new Error("unwrapped an undefined value");return n}var m=t(81443);function b(){var n=(0,o.Z)(["\n  margin: 10px auto 0 auto;\n  background-color: #3898EC;\n  color: #ffffff;\n  text-align: center;\n  padding: 8px 12px;\n  border-radius: 3px;\n  font-size: 14px;\n  cursor: pointer;\n\n  &:hover {\n    background-color: #338ad6;\n  }\n"]);return b=function(){return n},n}function y(){var n=(0,o.Z)(["\n  position: absolute;\n  left: 26px;\n  bottom: 28px;\n  width: 270px;\n  height: 90px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  color: #848484;\n  text-align: center;\n  flex-direction: column;\n"]);return y=function(){return n},n}function Z(){var n=(0,o.Z)(["\n  position: absolute;\n  left: 50%;\n  top: 15px;\n  font-size: 22px;\n  transform: translate(-50%, 0);\n  width: 100%;\n  text-align: center;\n  box-sizing: border-box;\n  padding: 0 20px;\n"]);return Z=function(){return n},n}function j(){var n=(0,o.Z)(["\n  position: absolute;\n  left: 43px;\n  top: 69px;\n  border-radius: 12px;\n  z-index: 1;\n  background: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n\n  &,\n  > canvas,\n  > video,\n  > img {\n    width: 340px!important;\n    height: 151px!important;\n    object-fit: cover;\n  }\n\n  > canvas,\n  > video {\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n"]);return j=function(){return n},n}function P(){var n=(0,o.Z)(["\n  width: 420px;\n  height: 500px;\n  position: relative;\n"]);return P=function(){return n},n}function C(){var n=(0,o.Z)(["\n  background: rgba(0,0,0,0);\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 0;\n  cursor: pointer;\n"]);return C=function(){return n},n}function S(){var n=(0,o.Z)(["\n  background: rgba(0,0,0,0.5);\n  position: fixed;\n  left: -50vw;\n  top: -50vh;\n  width: 200vw;\n  height: 200vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n"]);return S=function(){return n},n}var E=c.ZP.div(S()),z=c.ZP.div(C()),I=c.ZP.div(P()),O=c.ZP.div(j()),B=c.ZP.h2(Z()),T=c.ZP.div(y()),K=c.ZP.a(b());function V(n){var e=n.onClose,t=n.uploadedImage,r=(0,u.useState)("Initializing..."),o=r[0],c=r[1],d=(0,u.useState)(),f=d[0],x=d[1],h=(0,u.useState)(),v=h[0],g=h[1];function w(n){console.error(n),n.CantProve?c("Can't prove: "+n.CantProve):c(n.toString())}function k(){return(k=(0,s.Z)(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=12;break}return n.prev=1,n.next=4,b();case 4:c("Take a picture"),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(1),w(n.t0);case 10:n.next=21;break;case 12:return n.prev=12,e=(0,p.NY)([t]),n.next=16,Z(e);case 16:n.next=21;break;case 18:n.prev=18,n.t1=n.catch(12),w(n.t1);case 21:case"end":return n.stop()}}),n,null,[[1,7],[12,18]])})))).apply(this,arguments)}function b(){return y.apply(this,arguments)}function y(){return(y=(0,s.Z)(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e=document.getElementById("video")){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{}});case 5:t=n.sent,e.srcObject=t;case 7:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function Z(n){return j.apply(this,arguments)}function j(){return(j=(0,s.Z)(i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c("Generating..."),n.next=3,(0,p.fL)(e);case 3:return t=n.sent,n.next=6,l(t);case 6:r=n.sent,x(r),c("Credential Created");case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function P(){return(P=(0,s.Z)(i().mark((function n(){var e,t,r,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,navigator.mediaDevices.getUserMedia({audio:!1,video:{}});case 2:return e=n.sent,t=e.getVideoTracks()[0],r=new ImageCapture(t),n.next=7,r.takePhoto();case 7:return a=n.sent,n.next=10,Z(a);case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function C(){return(C=(0,s.Z)(i().mark((function n(){var e,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,p.NY)([t]),n.next=3,(0,p.fL)(e);case 3:r=n.sent,g(r);case 5:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,u.useEffect)((function(){return setTimeout((function(){!function(){k.apply(this,arguments)}()}),1e3),t&&function(){C.apply(this,arguments)}(),function(){}}),[]),(0,a.jsxs)(E,{children:[(0,a.jsx)(z,{onClick:e}),(0,a.jsxs)(I,{children:[(0,a.jsx)(m.Z,{}),(0,a.jsx)(B,{children:o}),(0,a.jsx)(O,{id:"videop",children:t?(0,a.jsx)("img",{id:"video",src:v,width:"340px",height:"151px"}):(0,a.jsx)("video",{id:"video",autoPlay:!0,muted:!0,width:"340px",height:"151px"})}),f?(0,a.jsxs)(T,{children:["Download your credential,",(0,a.jsx)("br",{}),"click buy and upload it!",(0,a.jsx)(K,{onClick:function(){var n="data:text/json;charset=utf-8,".concat(encodeURIComponent(JSON.stringify(f,null,2))),t=document.createElement("a");t.setAttribute("href",n),t.setAttribute("download","presentation.json"),t.click(),e()},children:"Download credential"})]}):(0,a.jsx)(a.Fragment,{children:t?(0,a.jsx)(T,{children:"Generating credential..."}):(0,a.jsx)(T,{children:(0,a.jsx)(K,{onClick:function(){return P.apply(this,arguments)},children:"Take Picture"})})})]})]})}}}]);