"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{64659:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var r=t(87312),o=t(74632);function a(e){return o.assertValidNode(e),JSON.stringify(u(e))}function i(e){switch(r.assert(1===Object.keys(e).length,"enum must have exactly one tag"),Object.keys(e)[0]){case"Bound":return o.assertType(e.Bound,"object"),{Bound:a(e.Bound)};case"Unbound":return o.assertType(e.Unbound,"string"),{Unbound:e.Unbound};default:throw new TypeError(`expected bound or unbound rule atom got ${e}`)}}function u(e){let n,t;switch(typeof e){case"string":return e;case"object":n=Object.keys(e),n.sort(),t={};for(const r of n)t[r]=u(e[r]);return t;default:throw new TypeError("type error: orderKeys() does not accept type "+typeof e)}}n.canon=a,n.canonClaimGraph=function(e){return e.map((e=>e.map(a)))},n.canonProof=function(e){return e.map((({rule_index:e,instantiations:n})=>({rule_index:e,instantiations:n.map(a)})))},n.canonRules=function(e){return e.map((({if_all:e,then:n})=>({if_all:e.map((e=>e.map(i))),then:n.map((e=>e.map(i)))})))},n.decanonClaimGraph=function(e){return e.map((e=>e.map(JSON.parse)))},n.decanonProof=function(e){return e.map((({rule_index:e,instantiations:n})=>({rule_index:e,instantiations:n.map(JSON.parse)})))}},53442:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var r=t(87312),o=t(74632),a=t(64659),i=t(10251),u=t(36805),s=t(789),c=t(54301),l=t(93132);function f(e){return e&&"object"===typeof e&&"default"in e?e:{default:e}}var d=f(i),p=f(u);const m="https://www.dock.io/rdf2020#logicV1",h="https://w3id.org/security#proof",y="https://www.w3.org/2018/credentials#issuer";async function w(e){r.assert(void 0!==e["@graph"],"Expected each credential to expand to its own @graph");const n={...E(e["@graph"])};r.assert(void 0!==n[y],"encountered credential without an issuer");const t=n[y][0]["@id"];delete n[h];const o=l.fromJsonldjsCg(await p.default.toRDF(n));return l.asEE(o,t)}async function _(e){const n=E(e),t=p.default.getValues(n,c.expandedCredentialProperty);return await async function(e){const n=await Promise.all(e.map(w));return l.merge(n)}(t)}class b extends Error{constructor(e){super("Proof relies on assumption that are not in the input."),this.unverifiedAssumption=e}}function g(e){return p.default.getValues(E(e),m).map(T).flat(1)}function v(e,n,t){const r=j(t,n);for(const o of r.assumed)if(!e.some((e=>k(e,o))))throw new b([...o]);return r.implied}function x(e,n,t){const r=s.prove(a.canonClaimGraph(e),a.canonClaimGraph(n),a.canonRules(t));return a.decanonProof(r)}function j(e,n){const{assumed:t,implied:r}=s.validate(a.canonRules(e),a.canonProof(n));return{assumed:a.decanonClaimGraph(t),implied:a.decanonClaimGraph(r)}}function k(e,n){for(const t of[e,n]){if(!(t instanceof Array)||3!==t.length)throw new TypeError;for(const e of t)o.assertValidNode(e)}return d.default(e,n)}function T(e){if("@json"!==e["@type"])throw new TypeError(`not a json literal: ${e}`);if(void 0===e["@value"])throw new TypeError(`json literal has no "@value": ${e}`);return e["@value"]}function E(e){return r.assert(Array.isArray(e)&&1===e.length,"expected expanded jsonld as an array of one element"),e[0]}n.UnverifiedAssumption=b,n.acceptCompositeClaims=async function(e,n){r.assert(void 0!==n,'An axiom list must be provided. Hint: rules may be "[]" to reject all.');const t=await _(e),o=v(t,g(e),n);return[...t,...o]},n.expandedIssuerProperty=y,n.expandedLogicProperty=m,n.expandedProofProperty=h,n.extractProof=g,n.getImplications=v,n.presentationToEEClaimGraph=_,n.proveCompositeClaims=async function(e,n,t){r.assert(void 0!==t,'An axiom list must be provided. Hint: rules may be "[]" to reject all.');const o=await _(e),a=await g(e),i=x(o,n,t);return u=a.concat(i),{"@type":"@json","@value":JSON.parse(JSON.stringify(u))};var u},n.proveh=x,n.validateh=j},93132:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var r=t(87312),o=t(74632);const a={Iri:"https://www.dock.io/rdf2020#claimsV1"};function i(e){switch(e.termType){case"NamedNode":return{Iri:e.value};case"BlankNode":return{Blank:e.value};case"Literal":return r.assert("NamedNode"===e.datatype.termType,"The datatype of an RDF literal must be an IRI"),{Literal:{value:e.value,datatype:e.datatype.value}};default:throw new TypeError(`Unknown node type: ${e.termType}`)}}class u{constructor(){this.nextBlank=0}next(){const e={Blank:`_:b${this.nextBlank}`};return this.nextBlank++,e}reallocateNames(e){const n=function(e){const n=new Set;for(const t of e)for(const e of t)void 0!==e.Blank&&n.add(e.Blank);return n}(e),t={};for(const r of n)t[r]=this.next();for(const r of e)for(let e=0;e<r.length;e++)void 0!==r[e].Blank&&(r[e]=t[r[e].Blank])}}function s(e){return r.assert(["type","subject","predicate","object"].includes(e),"unknown member of the rdf: context"),{Iri:`http://www.w3.org/1999/02/22-rdf-syntax-ns#${e}`}}n.asEE=function(e,n){o.assertType(n,"string");const t=o.deepClone(e),r=new u;r.reallocateNames(t);const i=[];for(const[o,u,c]of t){const e=r.next();i.push([{Iri:n},a,e]),i.push([e,s("subject"),o]),i.push([e,s("predicate"),u]),i.push([e,s("object"),c])}return i},n.claims=a,n.fromJsonldjsCg=function(e){return e.map((({subject:e,predicate:n,object:t})=>[e,n,t].map(i)))},n.merge=function(e){e.forEach(o.assertValidClaimGraph);const n=o.deepClone(e),t=new u;for(const r of n)t.reallocateNames(r);return n.flat(1)}},74632:function(e,n,t){Object.defineProperty(n,"__esModule",{value:!0});var r=t(87312);function o(e){const n=Object.keys(e);r.assert(1===n.length,"enum representaion invalid. enum must be exactly one variant");const t=n[0],o=e[t];switch(t){case"Iri":case"Blank":a(o,"string");break;case"Literal":a(o,"object"),r.assert(2===Object.keys(o).length,"Literals must have exactly two fields"),a(o.value,"string"),a(o.datatype,"string");break;default:throw new TypeError(`Bad node tag: ${t}`)}}function a(e,n){if(typeof e!==n)throw new TypeError(`Expected type ${n}. Got ${e} which has type ${typeof e}.`)}n.assertType=a,n.assertValidClaimGraph=function(e){for(const n of e)for(const e of n)o(e)},n.assertValidNode=o,n.deepClone=function(e){return JSON.parse(JSON.stringify(e))}},789:function(e,n,t){t.r(n),t.d(n,{__wbindgen_json_parse:function(){return r.t$},__wbindgen_json_serialize:function(){return r.r1},__wbindgen_object_drop_ref:function(){return r.ug},__wbindgen_rethrow:function(){return r.nD},prove:function(){return r.tT},validate:function(){return r.Gu}});t(68482);var r=t(36131)},36131:function(e,n,t){t.d(n,{tT:function(){return g},Gu:function(){return v},t$:function(){return x},r1:function(){return j},ug:function(){return k},nD:function(){return T}});var r=t(68482);e=t.hmd(e);let o=new("undefined"===typeof TextDecoder?(0,e.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});o.decode();let a=null;function i(){return null!==a&&a.buffer===r.memory.buffer||(a=new Uint8Array(r.memory.buffer)),a}const u=new Array(32).fill(void 0);u.push(void 0,null,!0,!1);let s=u.length;function c(e){s===u.length&&u.push(u.length+1);const n=s;return s=u[n],u[n]=e,n}function l(e){return u[e]}let f=0;let d=new("undefined"===typeof TextEncoder?(0,e.require)("util").TextEncoder:TextEncoder)("utf-8");const p="function"===typeof d.encodeInto?function(e,n){return d.encodeInto(e,n)}:function(e,n){const t=d.encode(e);return n.set(t),{read:e.length,written:t.length}};let m=null;function h(){return null!==m&&m.buffer===r.memory.buffer||(m=new Int32Array(r.memory.buffer)),m}function y(e){const n=l(e);return function(e){e<36||(u[e]=s,s=e)}(e),n}let w=null;function _(){return null!==w&&w.buffer===r.memory.buffer||(w=new Uint32Array(r.memory.buffer)),w}function b(e,n){const t=n(4*e.length),r=_();for(let o=0;o<e.length;o++)r[t/4+o]=c(e[o]);return f=e.length,t}function g(e,n,t){try{const m=r.__wbindgen_export_2.value-16;r.__wbindgen_export_2.value=m;var o=b(e,r.__wbindgen_malloc),a=f,i=b(n,r.__wbindgen_malloc),u=f,s=b(t,r.__wbindgen_malloc),c=f;r.prove(m,o,a,i,u,s,c);var l=h()[m/4+0],d=h()[m/4+1],p=function(e,n){const t=_().subarray(e/4,e/4+n),r=[];for(let o=0;o<t.length;o++)r.push(y(t[o]));return r}(l,d).slice();return r.__wbindgen_free(l,4*d),p}finally{r.__wbindgen_export_2.value+=16}}function v(e,n){var t=b(e,r.__wbindgen_malloc),o=f,a=b(n,r.__wbindgen_malloc),i=f;return y(r.validate(t,o,a,i))}const x=function(e,n){var t,r;return c(JSON.parse((t=e,r=n,o.decode(i().subarray(t,t+r)))))},j=function(e,n){const t=l(n);var o=function(e,n,t){if(void 0===t){const t=d.encode(e),r=n(t.length);return i().subarray(r,r+t.length).set(t),f=t.length,r}let r=e.length,o=n(r);const a=i();let u=0;for(;u<r;u++){const n=e.charCodeAt(u);if(n>127)break;a[o+u]=n}if(u!==r){0!==u&&(e=e.slice(u)),o=t(o,r,r=u+3*e.length);const n=i().subarray(o+u,o+r);u+=p(e,n).written}return f=u,o}(JSON.stringify(void 0===t?null:t),r.__wbindgen_malloc,r.__wbindgen_realloc),a=f;h()[e/4+1]=a,h()[e/4+0]=o},k=function(e){y(e)},T=function(e){throw y(e)}},68482:function(e,n,t){var r=t.w[e.id];e.exports=r;t(36131);r[""]()}}]);