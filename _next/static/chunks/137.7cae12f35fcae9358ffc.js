(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137,654],{88660:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return W}});var r=e(92809),i=e(85893),o=e(809),a=e.n(o),c=e(30266),u=e(52209),s=e(67294),p=e(29163),f=e(41389),l=e(45263),d=e(34038),h=e(10251),v=e.n(h),x=e(93354),b=e(34613);function m(n,t){var e;if("undefined"===typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(!n)return;if("string"===typeof n)return w(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(n);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return w(n,t)}(n))||t&&n&&"number"===typeof n.length){e&&(n=e);var r=0,i=function(){};return{s:i,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,c=!1;return{s:function(){e=n[Symbol.iterator]()},n:function(){var n=e.next();return a=n.done,n},e:function(n){c=!0,o=n},f:function(){try{a||null==e.return||e.return()}finally{if(c)throw o}}}}function w(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}var y={Iri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"},g={Iri:"https://example.com/OfAge"};function j(n){return k.apply(this,arguments)}function k(){return(k=(0,c.Z)(a().mark((function n(t){var r,i,o,c,u,s,p,f,l,h;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,x.hb)(t);case 2:return n.next=4,e.e(442).then(e.bind(e,53442));case 4:return r=n.sent,i=r.acceptCompositeClaims,n.next=8,(0,x.jn)(t);case 8:return o=n.sent,n.next=11,i(o,b.Z);case 11:c=n.sent,u=m(c),n.prev=13,u.s();case 15:if((s=u.n()).done){n.next=21;break}if(p=(0,d.Z)(s.value,3),f=p[0],l=p[1],h=p[2],void 0===f.Iri||!v()(l,y)||!v()(h,g)){n.next=19;break}return n.abrupt("return",f.Iri);case 19:n.next=15;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(13),u.e(n.t0);case 26:return n.prev=26,u.f(),n.finish(26);case 29:throw new Error("age not proven");case 30:case"end":return n.stop()}}),n,null,[[13,23,26,29]])})))).apply(this,arguments)}var Z=e(81443);function O(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function P(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?O(Object(e),!0).forEach((function(t){(0,r.Z)(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):O(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function D(){var n=(0,u.Z)(["\n  position: absolute;\n  left: 26px;\n  bottom: 28px;\n  width: 270px;\n  height: 90px;\n  border-radius: 12px;\n  border: 1px dashed #cccccc;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  font-size: 14px;\n  color: #848484;\n  text-align: center;\n"]);return D=function(){return n},n}function E(){var n=(0,u.Z)(["\n  position: absolute;\n  left: 50%;\n  top: 15px;\n  font-size: 22px;\n  transform: translate(-50%, 0);\n  width: 100%;\n  text-align: center;\n  box-sizing: border-box;\n  padding: 0 20px;\n"]);return E=function(){return n},n}function I(){var n=(0,u.Z)(["\n  position: absolute;\n  left: 43px;\n  top: 69px;\n  border-radius: 12px;\n  z-index: 1;\n  background: rgba(0, 0, 0, 0.5);\n  overflow: hidden;\n\n  &,\n  > canvas,\n  > video {\n    width: 340px!important;\n    height: 151px!important;\n    object-fit: cover;\n  }\n\n  > canvas,\n  > video {\n    position: absolute;\n    left: 0;\n    top: 0;\n  }\n"]);return I=function(){return n},n}function S(){var n=(0,u.Z)(["\n  width: 420px;\n  height: 500px;\n  position: relative;\n"]);return S=function(){return n},n}function A(){var n=(0,u.Z)(["\n  background: rgba(0,0,0,0);\n  position: fixed;\n  left: 0;\n  top: 0;\n  width: 100vw;\n  height: 100vh;\n  z-index: 0;\n  cursor: pointer;\n"]);return A=function(){return n},n}function C(){var n=(0,u.Z)(["\n  background: rgba(0,0,0,0.5);\n  position: fixed;\n  left: -50vw;\n  top: -50vh;\n  width: 200vw;\n  height: 200vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 10;\n"]);return C=function(){return n},n}var F=p.ZP.div(C()),N=p.ZP.div(A()),z=p.ZP.div(S()),M=p.ZP.div(I()),B=p.ZP.h2(E()),q=p.ZP.div(D());function U(n,t){var e=n.map((function(e,r){return Math.pow(n[r]-t[r],2)})).reduce((function(n,t){return n+t}),0);return Math.sqrt(e)}function _(n){return{width:n.videoWidth,height:n.videoHeight}}function L(n,t){if(!t)return"Awaiting credential";if(0===n.length)return"No face found";if(n.length>1)return"One person at a time please";var e=U(n[0].descriptor,t);return e<.5?"Match! Difference: ".concat(Math.floor(1e3*e)/1e3):"No match. Difference: ".concat(e)}function T(n,t){return!!t&&(0!==n.length&&(!(n.length>1)&&U(n[0].descriptor,t)<.5))}function R(n){return J.apply(this,arguments)}function J(){return(J=(0,c.Z)(a().mark((function n(t){var e,r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(t);case 2:if((e=n.sent).ok){n.next=5;break}throw new Error("failed to fetch: (".concat(e.status,") ").concat(e.statusText,", from url: ").concat(t));case 5:return n.next=7,e.blob();case 7:if((r=n.sent).type.startsWith("image/")){n.next=10;break}throw new Error("fetchImage - expected blob type to be of type image/*, instead have: ".concat(r.type,", for url: ").concat(e.url));case 10:return n.abrupt("return",l.dV(r));case 11:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var V=null;function W(n){var t=n.onClose,e=n.onMatch,r=(0,s.useState)("Initializing..."),o=r[0],u=r[1];function p(n,t){return d.apply(this,arguments)}function d(){return(d=(0,c.Z)(a().mark((function n(t,e){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,new Promise((function(n){t.addEventListener(e,n,{once:!0})}));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(n){n().then((function(){return requestAnimationFrame((function(){return h(n)}))}))}function v(n){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)(a().mark((function n(t){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.Qr(t,new l.aK).withFaceLandmarks().withFaceDescriptors();case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function m(){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)(a().mark((function n(){var r,i,c,s,p;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=document.getElementById("canvas"),i=document.getElementById("video"),!r||!i){n.next=13;break}return n.next=5,v("video");case 5:c=n.sent,l.JF(r,_(i)),r.getContext("2d").clearRect(0,0,r.width,r.height),s=l._C(c,_(i)),l.ii.drawFaceLandmarks(r,s),T(c,V)&&setTimeout((function(){t(),e()}),1e3),(p=L(c,V))!==o&&u(p);case 13:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function y(){return g.apply(this,arguments)}function g(){return(g=(0,c.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([k(),l.qB.tinyFaceDetector.loadFromUri("/models"),l.qB.faceLandmark68Net.loadFromUri("/models"),l.qB.faceRecognitionNet.loadFromUri("/models")]);case 2:h(m);case 3:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function k(){return O.apply(this,arguments)}function O(){return(O=(0,c.Z)(a().mark((function n(){var t,e;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=document.getElementById("video")){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,navigator.mediaDevices.getUserMedia({audio:!1,video:{}});case 5:return e=n.sent,t.srcObject=e,n.next=9,p(t,"play");case 9:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function D(){return(D=(0,c.Z)(a().mark((function n(t){var e,r,i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e=(0,x.NY)(t),n.t0=JSON,n.next=4,e.text();case 4:return n.t1=n.sent,r=n.t0.parse.call(n.t0,n.t1),n.next=8,j(r);case 8:return i=n.sent,n.next=11,R(i);case 11:return o=n.sent,n.t2=x.NY,n.next=15,v(o);case 15:n.t3=n.sent,V=(0,n.t2)(n.t3,"the number of faces in the image provided was not 1").descriptor;case 17:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var E=(0,s.useCallback)((function(n){try{!function(n){D.apply(this,arguments)}(n)}catch(t){u(t.toString())}}),[]),I=(0,f.u)({accept:"application/json",onDrop:E}),S=I.getRootProps,A=I.getInputProps,C=I.isDragActive;return(0,s.useEffect)((function(){return V=null,setTimeout((0,c.Z)(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),u(n.t0.toString());case 8:case"end":return n.stop()}}),n,null,[[0,5]])}))),1e3),function(){}}),[]),(0,i.jsxs)(F,{children:[(0,i.jsx)(N,{onClick:t}),(0,i.jsxs)(z,{children:[(0,i.jsx)(Z.Z,{}),(0,i.jsx)(B,{children:o}),(0,i.jsxs)(M,{id:"videop",children:[(0,i.jsx)("video",{id:"video",autoPlay:!0,muted:!0,width:"340px",height:"151px"}),(0,i.jsx)("canvas",{id:"canvas"})]}),(0,i.jsxs)(q,P(P({},S()),{},{children:[(0,i.jsx)("input",P({},A())),C?(0,i.jsx)("p",{children:"Drop the file here..."}):(0,i.jsxs)("p",{children:["Drop your VP here",(0,i.jsx)("br",{}),"or click to upload"]})]}))]})]})}},64902:function(){},40522:function(){},90753:function(){},68730:function(){},24654:function(){}}]);